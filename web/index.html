<!DOCTYPE html>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>line-food-web</title>
<script type="module" src="./js/fav.js?v=20250906b"></script>
<link rel="stylesheet" href="./css/app.css?v=20250906b" />

<!-- ヘッダ -->
<header class="app-header">
  <div class="search-wrap">
    <svg aria-hidden="true" viewBox="0 0 24 24">
      <path
        d="M21 21l-4.3-4.3M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z"
      />
    </svg>
    <input type="search" placeholder="現在地・駅・店舗名などから探す" />
  </div>
  <button class="icon-btn" aria-label="通知">
    <svg viewBox="0 0 24 24">
      <path d="M10 21a2 2 0 0 0 4 0M5 8a7 7 0 1 1 14 0v5l2 3H3l2-3V8Z" />
    </svg>
  </button>
</header>

<!-- バナー -->
<section class="banner">
  <div class="banner-inner">
    <div>
      <h2>レスキュー指南書</h2>
      <p>初めての方はこちら</p>
    </div>
    <button class="banner-close" aria-label="閉じる">×</button>
  </div>
</section>

<main class="container">
  <!-- 近くのお店 -->
  <div class="section-head">
    <h3>現在地付近のお店</h3>
    <a class="more" href="#">もっと見る</a>
  </div>

  <div class="card-row">
    <!-- カード（サンプル。画像は差し替えてOK） -->
    <article class="shop-card">
      <div class="thumb">
        <img src="./photo/sample1.jpg" alt="店舗写真" />
        <span class="stock">のこり15個</span>
        <span class="price">¥390</span>
      </div>
      <div class="body">
        <div class="title-line">
          <h4>エクセルシオールカフェ …</h4>
          <button
            class="heart fav-btn"
            data-shop-id="9069dcf9-4a86-475c-9cfa-aacffea7f9bb"
            aria-pressed="false"
            title="お気に入り"
          >
            ♡
          </button>
        </div>
        <div class="subline">
          <span class="point">5.0%還元</span>
          <span class="status">集計中</span>
        </div>
        <div class="meta">
          <span class="time">15:00 - 21:00</span>
          <span class="walk">六名駅から徒歩16分</span>
        </div>
      </div>
    </article>

    <article class="shop-card">
      <div class="thumb">
        <img src="./photo/sample2.jpg" alt="店舗写真" />
        <span class="stock">のこり1個</span>
        <span class="price">¥900〜</span>
      </div>
      <div class="body">
        <div class="title-line">
          <h4>ベーカリーカフェ</h4>
          <button
            class="heart fav-btn"
            data-shop-id="<<UUID>>"
            aria-pressed="false"
            aria-label="お気に入りを切り替え"
          >
            <svg viewBox="0 0 24 24" aria-hidden="true">
              <path
                d="M12 21s-6.7-4.2-9.2-8C1.2 10 2.1 7.2 4.6 6c1.9-1 4.3-.5 5.6 1.2C11.5 5.5 13.9 5 15.8 6c2.5 1.2 3.4 4 1.8 7-2.5 3.8-9.6 8-9.6 8Z"
                fill="none"
                stroke="currentColor"
                stroke-width="1.8"
              />
            </svg>
          </button>
        </div>
        <div class="subline">
          <span class="point">0.5%還元</span
          ><span class="status warn">残りわずか</span>
        </div>
        <div class="meta">
          <span class="time">17:30 - 20:00</span
          ><span class="walk">徒歩8分</span>
        </div>
      </div>
    </article>
  </div>

  <!-- 最近追加 -->
  <div class="section-head">
    <h3>最近追加されたお店</h3>
    <a class="more" href="#">もっと見る</a>
  </div>

  <div class="card-row">
    <article class="shop-card rescued">
      <div class="thumb">
        <img src="./photo/sample3.jpg" alt="店舗写真" />
        <span class="ribbon">Rescued!</span>
        <span class="price">¥600</span>
      </div>
      <div class="body">
        <div class="title-line">
          <h4>deux Montagne</h4>
          <button
            class="heart fav-btn"
            data-shop-id="aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee"
            aria-pressed="false"
            title="お気に入り"
          >
            ♡
          </button>
        </div>
        <div class="subline">
          <span class="point">0.5%還元</span><span class="status">集計中</span>
        </div>
        <div class="meta">
          <span class="time">17:10 - 17:55</span
          ><span class="walk">江曽島駅 徒歩1分</span>
        </div>
      </div>
    </article>
  </div>
</main>

<!-- 下部タブ -->
<nav class="tabbar" aria-label="メイン">
  <a class="active" href="#">
    <span class="icon" aria-hidden="true">
      <!-- home/store -->
      <svg viewBox="0 0 24 24">
        <path
          d="M4 10v10h16V10M2 11l10-7 10 7"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </svg>
    </span>
    <span class="label">ホーム</span>
  </a>
  <a href="#">
    <span class="icon" aria-hidden="true">
      <!-- search -->
      <svg viewBox="0 0 24 24">
        <circle
          cx="11"
          cy="11"
          r="6"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
        />
        <path
          d="M20 20l-3.8-3.8"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
        />
      </svg>
    </span>
    <span class="label">お店を探す</span>
  </a>
  <a href="#">
    <span class="icon" aria-hidden="true">
      <!-- heart -->
      <svg viewBox="0 0 24 24">
        <path
          d="M12 21s-6.7-4.2-9.2-8C1.2 10 2.1 7.2 4.6 6c1.9-1 4.3-.5 5.6 1.2C11.5 5.5 13.9 5 15.8 6c2.5 1.2 3.4 4 1.8 7-2.5 3.8-9.6 8-9.6 8Z"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
        />
      </svg>
    </span>
    <span class="label">お気に入り</span>
  </a>
  <a href="#">
    <span class="icon" aria-hidden="true">
      <!-- lifebuoy -->
      <svg viewBox="0 0 24 24">
        <circle
          cx="12"
          cy="12"
          r="9"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
        />
        <circle
          cx="12"
          cy="12"
          r="4"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
        />
        <path
          d="M5.6 5.6l2.2 2.2M16.2 5.6l2.2 2.2M5.6 16.2l2.2 2.2M16.2 16.2l2.2 2.2"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
        />
      </svg>
    </span>
    <span class="label">レスキュー</span>
  </a>
  <a href="#">
    <span class="icon" aria-hidden="true">
      <!-- user -->
      <svg viewBox="0 0 24 24">
        <circle
          cx="12"
          cy="8"
          r="3.2"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
        />
        <path
          d="M5 19a7 7 0 0 1 14 0"
          fill="none"
          stroke="currentColor"
          stroke-width="1.8"
          stroke-linecap="round"
        />
      </svg>
    </span>
    <span class="label">マイページ</span>
  </a>
</nav>

<!-- （デバッグ要素：既存 app.js が参照するので非表示で残す） -->
<button id="btnWho" hidden>/api/whoami を呼ぶ</button>
<pre id="out" hidden></pre>

<!-- LIFF SDK & 既存モジュール -->
<script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
<script type="module" src="./js/app.js"></script>
<script type="module">
  // 既に fav.js を入れている場合は有効化
  import("./js/fav.js")
    .then((m) => liff.ready.then(() => m.initAllFavButtons?.()))
    .catch(() => {});
  // バナー×印
  document
    .querySelector(".banner-close")
    ?.addEventListener("click", () =>
      document.querySelector(".banner")?.remove()
    );
</script>
