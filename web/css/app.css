/* =========================================================
   app.css — clean & consolidated (Spotlight fixed)
   ========================================================= */

/* ------------------- Design tokens ------------------- */
:root{
  /* Palette */
  --bg:#f4f1ea;          /* page background (warm beige) */
  --surface:#ffffff;     /* cards */
  --ink:#141915;         /* main text */
  --muted:#6f776f;       /* secondary text */
  --line:#e9e4dc;        /* subtle borders */

  --brand:#1a3a2d;       /* deep green accent */
  --heart:#e2535f;
  --warn:#c97e22;
  --white:#ffffff;

  /* Layout */
  --tabbar-h:64px;
  --home-cta-h:72px;

  /* Shadows & Radius */
  --radius-md:12px;
  --radius-lg:16px;
  --shadow-1:0 6px 18px rgba(0,0,0,.06);
  --shadow-2:0 10px 24px rgba(0,0,0,.10);

  /* Spotlight */
  --hero-bg:#E9E8E4;
}

/* ------------------- Base / reset ------------------- */
*{ box-sizing:border-box; }
html,body{ height:100%; }
[hidden]{ display:none !important; }

body{
  margin:0;
  background:var(--bg);
  color:color-mix(in srgb, var(--ink) 92%, transparent);
  font:16px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,
       "Apple Color Emoji","Segoe UI Emoji";
}

/* ------------------- Header ------------------- */
.app-header{
  position:sticky; top:0; z-index:10;
  display:flex; align-items:center; gap:.75rem;
  padding:16px 16px 12px;
  background:var(--bg); color:var(--ink);
  border-bottom:1px solid var(--line);
}
.app-header .icon-btn{ background:transparent; border:0; color:inherit; padding:4px; }
.app-header .icon-btn svg{ width:22px; height:22px; fill:none; stroke:currentColor; stroke-width:1.8; }
.app-header .search-wrap{
  flex:1; display:flex; align-items:center; gap:.7rem;
  height:48px; padding:8px 14px; background:#fff;
  border:1px solid var(--line); border-radius:999px;
}
.app-header .search-wrap svg{ width:20px; height:20px; fill:none; stroke:#9aa09c; stroke-width:2; }
.app-header input[type="search"]{
  width:100%; border:0; outline:0; background:transparent; color:var(--ink);
  font-size:16px; line-height:1.2; padding:2px 0;
}
.app-header input[type="search"]::placeholder{ color:#aab2bb; font-size:14px; opacity:1; }

/* ------------------- Generic containers ------------------- */
.container{ padding:4px 14px 18px; }

/* Section heads */
.section-head{
  margin:18px 0 8px;
  display:flex; justify-content:space-between; align-items:center;
}
.section-head h3{
  margin:0; font-size:18px; font-weight:800; letter-spacing:.01em; color:var(--ink);
}
.section-head .more{
  font-size:14px; font-weight:700; color:var(--brand); text-decoration:none;
}

/* ------------------- Horizontal card row ------------------- */
.card-row{
  display:grid; grid-auto-flow:column; grid-auto-columns:84%;
  gap:16px; overflow-x:auto; -webkit-overflow-scrolling:touch;
  scroll-snap-type:x proximity; padding-bottom:12px;
}
.card-row .shop-card{ scroll-snap-align:start; }
.card-row::-webkit-scrollbar{ display:none; }

/* ------------------- Tab bar ------------------- */
.tabbar{
  position:fixed; inset:auto 0 0 0; z-index:20;
  display:grid; grid-template-columns:repeat(5,1fr);
  height:var(--tabbar-h); background:var(--bg); border-top:1px solid var(--line);
}
.tabbar a{
  text-decoration:none; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:4px; color:#6c5852;
}
.tabbar .icon svg{ width:22px; height:22px; color:var(--brand); }
.tabbar .label{ font-size:12px; }
.tabbar a.active{ color:var(--brand); }

/* Give pages space for CTA + tabbar */
main,.home-main,.page,.container{
  padding-bottom:calc(var(--home-cta-h) + var(--tabbar-h) + env(safe-area-inset-bottom) + 12px);
}

/* ------------------- Heart (shared) ------------------- */
.heart{
  color:var(--heart); border:1.2px solid currentColor; background:#fff;
  width:28px; height:28px; border-radius:999px; display:grid; place-items:center; line-height:1; padding:0;
  transition:background .15s,color .15s,box-shadow .15s;
}
.heart svg{ width:18px; height:18px; display:block; }
.heart svg path{ fill:none; stroke:currentColor; stroke-width:1.8; stroke-linecap:round; stroke-linejoin:round; }
.heart:hover{ box-shadow:0 0 0 4px color-mix(in srgb, var(--heart) 14%, transparent); }
.heart[aria-pressed="true"]{ background:var(--heart); color:#fff; }
.heart[aria-pressed="true"] svg path{ fill:currentColor !important; stroke:currentColor; }

/* ------------------- Shop Card v3 ------------------- */
.shop-card{
  background:var(--surface); border:1px solid var(--line);
  border-radius:var(--radius-lg); overflow:hidden; box-shadow:var(--shadow-1);
}
.shop-card.card-v3{ position:relative; }
.shop-card.card-v3 .card-head{
  display:flex; align-items:center; justify-content:space-between; gap:.8rem;
  padding:.6rem .8rem; min-height:64px; border-bottom:1px solid var(--line); position:relative; overflow:hidden;
}
.shop-card.card-v3 .store{ display:flex; align-items:center; gap:.25rem; min-width:0; }
.shop-card.card-v3 .avatar{ display:none !important; }
.shop-card.card-v3 .store-name{
  margin:0; font-size:16px; line-height:1.2; font-weight:800; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.shop-card.card-v3 .store-sub{
  display:flex; align-items:center; gap:.4rem; margin-top:.28rem; font-size:12.5px; line-height:1.2; color:var(--muted);
}
.shop-card.card-v3 .store-sub .chip{
  background:#fff; border:1px solid var(--line); color:var(--ink);
  padding:.18rem .48rem; border-radius:999px; white-space:nowrap;
}
.shop-card.card-v3 .card-body{ padding:.7rem .9rem .9rem; }

/* ------------------- Fixed CTA ------------------- */
.home-cta{
  position:fixed; left:0; right:0; bottom:calc(var(--tabbar-h) + env(safe-area-inset-bottom));
  z-index:40; padding:8px 12px; background:transparent !important; border:0 !important; outline:none !important; box-shadow:none !important;
  opacity:0; transform:translateY(8px); pointer-events:none; transition:opacity .24s ease, transform .24s ease; will-change:opacity,transform;
}
.home-cta.is-visible{ opacity:1; transform:translateY(0); pointer-events:auto; }
.home-cta-btn{
  display:block; width:min(720px,92%); margin:0 auto; padding:16px 18px;
  border:0; border-radius:16px; background:var(--brand); color:#fff; font-weight:800; font-size:16px;
  box-shadow:0 8px 18px rgba(0,0,0,.12);
}

/* ------------------- Loading placeholder (読み込み中…) ------------------- */
.nearby-loading,.recent-loading,.loading-placeholder,.loading-box{
  padding:14px 18px 14px 22px;   /* ← 左パディング広め */
  font-size:13.5px;              /* ← 小さめ文字 */
  color:var(--muted);
}

/* =========================================================
   Spotlight (Agoda-like) — consolidated & final
   ========================================================= */
.hero-spotlight{
  background:var(--hero-bg);
  border:1px solid var(--line);
  border-radius:16px;
  padding:12px 16px 14px;
  box-shadow:var(--shadow-1);  /* shop-card風の柔らかい影 */
  margin:12px 0;
}
.hero-spotlight .spotlight-head{
  display:flex; align-items:center; justify-content:space-between; margin:0 0 10px; color:var(--ink);
}
.hero-spotlight .spotlight-head h2{
  margin:0; font-size:18px; font-weight:800; letter-spacing:.01em;
}
.hero-spotlight .spotlight-more{ font-size:14px; color:var(--brand); text-decoration:none; }

/* カード本体：白＋細枠＋淡影 */
.spotlight-card{
  background:#fff; border:1px solid var(--line);
  border-radius:16px; box-shadow:var(--shadow-1); padding:0; margin:0;
}

/* 画像ブロック */
.spotlight-media{ position:relative; display:block; border-radius:16px; overflow:hidden; }
.spotlight-media img{ display:block; width:100%; height:auto; aspect-ratio:21/9; object-fit:cover; }
/* 下側の読ませグラデ */
.sp-grad{ position:absolute; inset:auto 0 0 0; height:42%; background:linear-gradient(to top, rgba(0,0,0,.35), rgba(0,0,0,0)); pointer-events:none; }

/* 左上フラグ（本日のおすすめ） */
.sp-flag{
  position:absolute; top:10px; left:10px; z-index:5;
  padding:6px 10px; border-radius:999px; background:#d9534f; color:#fff;
  font-weight:800; font-size:12px; line-height:1; box-shadow:0 4px 10px rgba(0,0,0,.12);
}

/* 右上アクション */
.sp-acts{ position:absolute; right:12px; top:12px; display:flex; gap:10px; }
.sp-act{
  width:40px; height:40px; border:0; border-radius:999px; background:#fff; color:#1b1b1b;
  display:grid; place-items:center; box-shadow:0 4px 12px rgba(0,0,0,.18);
}
.sp-act svg{ width:22px; height:22px; }

/* 左下の “1/5” */
.sp-count{
  position:absolute; left:14px; bottom:12px; background:rgba(0,0,0,.55); color:#fff;
  font-weight:700; font-size:13px; line-height:1; padding:8px 10px; border-radius:14px;
}

/* 右下：価格のみ（リボンは消す・1行） */
.sp-price{ position:absolute; right:12px; bottom:12px; display:flex; align-items:center; gap:8px; }
.sp-ribbon{ display:none !important; }
.sp-price-card{
  display:inline-flex; align-items:baseline; gap:6px; white-space:nowrap; line-height:1;
  background:#fff; color:#111; padding:8px 12px; border-radius:12px; box-shadow:0 10px 24px rgba(0,0,0,.22);
  font-weight:900; font-size:22px;
}
.sp-price-card .yen{ font-size:.72em; font-weight:700; opacity:.9; }
.sp-price-card small{ font-size:12px; opacity:.8; }

/* 画像の下：店名とメタ（カテゴリ/距離/場所） */
.spotlight-info{ padding:8px 4px 2px; }
.spotlight-info .title{ margin:0; font-size:17px; font-weight:800; color:var(--ink); }
.spotlight-info .meta{ margin-top:6px; display:flex; flex-wrap:wrap; align-items:center; gap:8px; }
.spotlight-info .chip{
  display:inline-flex; align-items:center; gap:.35em; height:26px; padding:0 10px; border-radius:999px;
  border:1px solid color-mix(in srgb, var(--brand) 18%, transparent); background:#fff; color:var(--ink);
  font-size:12.5px; font-weight:700; white-space:nowrap;
}
.spotlight-info .chip.brand{ background:var(--brand); border-color:var(--brand); color:#fff; }
.spotlight-info .place{ color:var(--muted); font-size:12.5px; font-weight:600; white-space:nowrap; }

/* Spotlight ページドット（画像の外・右寄せ） */
.spotlight-dots{
  position:static !important; display:flex !important; justify-content:flex-end; gap:6px;
  margin:10px 2px 0; padding:4px 8px; background:rgba(255,255,255,.85);
  border:1px solid var(--line); border-radius:999px; box-shadow:var(--shadow-1);
}
.spotlight-dots li{
  width:6px; height:6px; border-radius:999px; background:color-mix(in oklab, var(--ink) 22%, transparent);
  opacity:.7; transition:all .2s;
}
.spotlight-dots li.is-active{ width:14px; border-radius:8px; background:var(--brand); opacity:1; }
